/*!
 * DJ Mountainous - Dj Mountainous v1.1.1 (djmountainous.com)
 * Copyright 2016-2016 Corey Sanford
 */
"use strict";function collapseNavbar(){$(".navbar").offset().top>$("#waves").offset().top-150?$(".navbar-fixed-top").addClass("top-nav-collapse"):$(".navbar-fixed-top").removeClass("top-nav-collapse")}$(function(){var t=[1,2,4,8,10,25,50,75,95],i=function(t){this.$audioPlayer=t,this.stub=this.$audioPlayer.attr("id"),this.rating=this.$audioPlayer.data("rating"),this.$playPauseBtn=this.$audioPlayer.find(".play-pause").eq(0),this.$track=this.$audioPlayer.find("audio").eq(0),this.track=this.$track.get(0),this.isPastMilestone={},this.constructMilestones(),this.$progressBar=this.$audioPlayer.find(".progress-bar").eq(0),this.$buffer=this.$progressBar.find(".buffer").eq(0),this.$played=this.$progressBar.find(".played").eq(0),this.$currentTime=this.$audioPlayer.find(".current-time").eq(0),this.$mixLength=this.$audioPlayer.find(".mix-length").eq(0),this.$divider=this.$audioPlayer.find(".divider").eq(0),this.trackRefreshTimer=null};i.prototype.constructMilestones=function(){var i=this;t.forEach(function(t){i.isPastMilestone[t]=!1})},i.prototype.sendProgressEvents=function(){var i=this,a=this.track.currentTime/this.track.duration*100;t.forEach(function(t){a>t&&(i.isPastMilestone[t]||(i.isPastMilestone[t]=!0,ga("send","event","Mix","progress-"+t,i.stub)))})},i.prototype.pauseAllOthers=function(){$(".audio-player").not(this.$audioPlayer).each(function(){var t=new i($(this));t.pauseTrack()})},i.prototype.isPaused=function(){return this.track.paused},i.prototype.pauseTrack=function(t){this.track.pause(),this.$audioPlayer.removeClass("playing"),this.$progressBar.removeClass("expanded")},i.prototype.playTrack=function(t){ga("send","event","Mix","play",this.stub,this.rating),this.pauseAllOthers(),this.track.play(),this.$audioPlayer.addClass("playing"),this.$progressBar.addClass("expanded"),this.startInterval(),this.$currentTime.text(this.currentTimeString()),this.$divider.show(),this.$mixLength.text(this.durationString())},i.prototype.startInterval=function(){this.trackRefreshTimer=setInterval(this.tick.bind(this),100)},i.prototype.clearInterval=function(){clearInterval(this.trackRefreshTimer)},i.prototype.tick=function(){this.$currentTime.text(this.currentTimeString()),this.updateProgressBar(),this.sendProgressEvents()},i.prototype.updateProgressBar=function(){var t=this.track.currentTime/this.track.duration*100;this.$played.css("width",t+"%")},i.prototype.currentTimeString=function(){return this.timeString(this.track.currentTime)},i.prototype.durationString=function(){return this.timeString(this.track.duration)},i.prototype.timeString=function(t){if(isNaN(t)){if(isNaN(this.track.duration))return"";this.track.duration}var i="0"+Math.round(t%60);return i=i.substr(i.length-2),Math.round(t/60)+":"+i},i.prototype.togglePlayPause=function(){this.isPaused()?this.playTrack():this.pauseTrack()},i.prototype.seek=function(t){var i=t.offsetX/$(t.target).width();this.track.currentTime=i*this.track.duration,this.updateProgressBar()},$("body").on("click",".play-pause",function(){var t=new i($(this).closest(".audio-player").eq(0));t.togglePlayPause()}),$("body").on("click",".progress-bar",function(t){var a=new i($(this).closest(".audio-player").eq(0));a.seek(t)}),$("body").on("click",".download",function(t){ga("send","event","Mix","download",$(this).closest(".audio-player").attr("id"),$(this).closest(".audio-player").data("rating"))})}),$(window).scroll(collapseNavbar),$(document).ready(collapseNavbar),$(function(){$("a.page-scroll").bind("click",function(t){var i=$(this);$("html, body").stop().animate({scrollTop:$(i.attr("href")).offset().top-150},1e3,"easeInOutExpo"),t.preventDefault()})}),$(".navbar-collapse ul li a").click(function(){"dropdown-toggle active"!=$(this).attr("class")&&"dropdown-toggle"!=$(this).attr("class")&&$(".navbar-toggle:visible").click()}),$(function(){function t(t){$(".v-descriptions > p").not('.v-descriptions > p[data-rating="'+t+'"]').hide(),$(".bottom-bar > div .rating-block").not('.bottom-bar > div .rating-block[data-rating="'+t+'"]').css("opacity",a).removeClass("active"),$('.bottom-bar > div .rating-block[data-rating="'+t+'"]').css("opacity",1).addClass("active"),$('.v-descriptions > p[data-rating="'+t+'"]').show()}var i=480,a="0.4",e="0.5",r=$(".bottom-bar .rating-block"),s=r.length;r.eq(0).height();0!==s&&(setInterval(function(){var t=Math.floor(Math.random()*s)+1;r.not(".active").css("opacity",a);for(var i=0;i<t;i++){var o=Math.floor(Math.random()*s)+1;r.eq(o).hasClass("active")||r.eq(o).css("opacity",e)}},i),$(".bottom-bar > div").on("click",function(){var i=$(this).find(".rating-block").data("rating");t(i)}))}),$(function(){var t=window.location.search.replace("?","");setTimeout(function(){$(".mix").not("."+t).css("opacity",.5),$(".mix-group__title, .group-description").css("opacity",.5)},0),$("*").on("click",function(){$(".mix").css("opacity",1)}),$("#mixes").on("click",".mix__details .rating",function(){$('.rating-block[data-rating="'+$(this).data("rating")+'"]').closest("div").trigger("hover"),$('.rating-block[data-rating="'+$(this).data("rating")+'"]').closest("div").trigger("click"),$("html, body").scrollTop($(".bottom-bar").offset().top-130)})}),$(function(){function t(t,i){var a=MyApp.templates.mixes(t);$("#mixes-tmpl-"+i).html(a)}var i={mixes:[{title:"The Eiger",genres:"Tech House",date:"Sept 2016",slug:"va-tech-house",rating:3},{title:"Garibaldi",genres:"Deep House",date:"June 2016",slug:"va-deep-house-v2",rating:2}]},a={mixes:[{title:"Blueprint 19th Warmup",genres:"Rezz Griz Grime W.S.N DFrancis",date:"October 2016",slug:"blueprint-19-warmup",rating:9},{title:"Live @ BirthRave 2016",genres:"Bass Funk, Trap, Dub",date:"Sept 24, 2016",slug:"live-birthrave-2016-bass-funk-dub",rating:8},{title:"Black Tusk",genres:"Trap & Dubstep",date:"August 2016",slug:"va-dubtrap",rating:9},{title:"Seven Lions warmup",genres:"Dreamstep",date:"October 2016",slug:"seven-lions-warm-up-mix",rating:7}]};t(a,"intense"),t(i,"calm")});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFsbC1taW4uanMiLCJncmF5c2NhbGUuanMiLCJhdWRpby1wbGF5ZXIuanMiLCJob21lcGFnZS1hbmltYXRpb25zLmpzIiwic2l0ZS5qcyJdLCJuYW1lcyI6WyJjb2xsYXBzZU5hdmJhciIsIiQiLCJvZmZzZXQiLCJ0b3AiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicHJvZ3Jlc3NNaWxlc3RvbmVzIiwiYXVkaW9QbGF5ZXIiLCIkYXVkaW9QbGF5ZXIiLCJ0aGlzIiwic3R1YiIsImF0dHIiLCJyYXRpbmciLCJkYXRhIiwiJHBsYXlQYXVzZUJ0biIsImZpbmQiLCJlcSIsIiR0cmFjayIsInRyYWNrIiwiZ2V0IiwiaXNQYXN0TWlsZXN0b25lIiwiY29uc3RydWN0TWlsZXN0b25lcyIsIiRwcm9ncmVzc0JhciIsIiRidWZmZXIiLCIkcGxheWVkIiwiJGN1cnJlbnRUaW1lIiwiJG1peExlbmd0aCIsIiRkaXZpZGVyIiwidHJhY2tSZWZyZXNoVGltZXIiLCJwcm90b3R5cGUiLCJfdGhpcyIsImZvckVhY2giLCJtaWxlc3RvbmUiLCJzZW5kUHJvZ3Jlc3NFdmVudHMiLCJfdGhpczIiLCJwcm9ncmVzcyIsImN1cnJlbnRUaW1lIiwiZHVyYXRpb24iLCJnYSIsInBhdXNlQWxsT3RoZXJzIiwibm90IiwiZWFjaCIsInBsYXlyIiwicGF1c2VUcmFjayIsImlzUGF1c2VkIiwicGF1c2VkIiwicGF1c2UiLCJwbGF5VHJhY2siLCJwbGF5Iiwic3RhcnRJbnRlcnZhbCIsInRleHQiLCJjdXJyZW50VGltZVN0cmluZyIsInNob3ciLCJkdXJhdGlvblN0cmluZyIsInNldEludGVydmFsIiwidGljayIsImJpbmQiLCJjbGVhckludGVydmFsIiwidXBkYXRlUHJvZ3Jlc3NCYXIiLCJwbGF5UGVyY2VudGFnZSIsImNzcyIsInRpbWVTdHJpbmciLCJ0aW1lIiwiaXNOYU4iLCJzZWNvbmRzIiwiTWF0aCIsInJvdW5kIiwic3Vic3RyIiwibGVuZ3RoIiwidG9nZ2xlUGxheVBhdXNlIiwic2VlayIsImV2ZW50Iiwib2Zmc2V0WCIsInRhcmdldCIsIndpZHRoIiwib24iLCJwbGF5ZXIiLCJjbG9zZXN0Iiwid2luZG93Iiwic2Nyb2xsIiwiZG9jdW1lbnQiLCJyZWFkeSIsIiRhbmNob3IiLCJzdG9wIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsInByZXZlbnREZWZhdWx0IiwiY2xpY2siLCJzaG93QW5kSGlnaGxpZ2h0UmF0aW5nIiwiaGlkZSIsIkRFRkFVTFRfT1BBQ0lUWSIsIkFOSU1BVElPTl9QRVJJT0QiLCJJTkNSRUFTRURfT1BBQ0lUWSIsIiRyYXRpbmdfYmxvY2tzIiwibnVtX3JhdGluZ3MiLCJoZWlnaHQiLCJibG9ja3NfdG9fYmxhbmsiLCJmbG9vciIsInJhbmRvbSIsImkiLCJyYW5kX2Jsb2NrX2luZGV4IiwiaGFzQ2xhc3MiLCJzZWFyY2giLCJsb2NhdGlvbiIsInJlcGxhY2UiLCJzZXRUaW1lb3V0IiwidHJpZ2dlciIsImluamVjdFRlbXBsYXRlcyIsInR5cGUiLCJodG1sIiwiTXlBcHAiLCJ0ZW1wbGF0ZXMiLCJtaXhlcyIsImNhbG1fbWl4ZXMiLCJ0aXRsZSIsImdlbnJlcyIsImRhdGUiLCJzbHVnIiwiaW50ZW5zZV9taXhlcyJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLFlDT0EsU0FBU0Esa0JBQ0RDLEVBQUUsV0FBV0MsU0FBU0MsSUFBTUYsRUFBRSxVQUFVQyxTQUFTQyxJQUFNLElBQ3ZERixFQUFFLHFCQUFxQkcsU0FBUyxvQkFFaENILEVBQUUscUJBQXFCSSxZQUFZLG9CQ1AzQ0osRUFBRSxXQUVBLEdBQU1LLElBQXNCLEVBQUcsRUFBRyxFQUFHLEVBQUcsR0FBSSxHQUFJLEdBQUksR0FBSSxJQUVwREMsRUFBYyxTQUFTQyxHQUV6QkMsS0FBS0QsYUFBZUEsRUFDcEJDLEtBQUtDLEtBQU9ELEtBQUtELGFBQWFHLEtBQUssTUFDbkNGLEtBQUtHLE9BQVNILEtBQUtELGFBQWFLLEtBQUssVUFFckNKLEtBQUtLLGNBQWdCTCxLQUFLRCxhQUFhTyxLQUFLLGVBQWVDLEdB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LEtBQU0sZ0JBQ05DLEtBQU0sb0NBQ056RyxPQUFRLElBRVJzRyxNQUFPLGFBQ1BDLE9BQVEsaUJBQ1JDLEtBQU0sY0FDTkMsS0FBTSxhQUNOekcsT0FBUSxJQUVSc0csTUFBTyxxQkFDUEMsT0FBUSxZQUNSQyxLQUFNLGVBQ05DLEtBQU0sMEJBQ056RyxPQUFRLElBTWQrRixHQUFnQlcsRUFBZ0IsV0FDaENYLEVBQWdCTSxFQUFnQiIsImZpbGUiOiJhbGwtbWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSFRNTE1lZGlhRWxlbWVudFxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvR3VpZGUvSFRNTC9Vc2luZ19IVE1MNV9hdWRpb19hbmRfdmlkZW9cblxuJChmdW5jdGlvbiAoKSB7XG5cbiAgdmFyIHByb2dyZXNzTWlsZXN0b25lcyA9IFsxLCAyLCA0LCA4LCAxMCwgMjUsIDUwLCA3NSwgOTVdO1xuXG4gIHZhciBhdWRpb1BsYXllciA9IGZ1bmN0aW9uIGF1ZGlvUGxheWVyKCRhdWRpb1BsYXllcikge1xuXG4gICAgdGhpcy4kYXVkaW9QbGF5ZXIgPSAkYXVkaW9QbGF5ZXI7XG4gICAgdGhpcy5zdHViID0gdGhpcy4kYXVkaW9QbGF5ZXIuYXR0cignaWQnKTtcbiAgICB0aGlzLnJhdGluZyA9IHRoaXMuJGF1ZGlvUGxheWVyLmRhdGEoJ3JhdGluZycpO1xuXG4gICAgdGhpcy4kcGxheVBhdXNlQnRuID0gdGhpcy4kYXVkaW9QbGF5ZXIuZmluZCgnLnBsYXktcGF1c2UnKS5lcSgwKTtcbiAgICB0aGlzLiR0cmFjayA9IHRoaXMuJGF1ZGlvUGxheWVyLmZpbmQoJ2F1ZGlvJykuZXEoMCk7XG4gICAgdGhpcy50cmFjayA9IHRoaXMuJHRyYWNrLmdldCgwKTtcblxuICAgIHRoaXMuaXNQYXN0TWlsZXN0b25lID0ge307IC8vZXZlbnR1YWxseSBwb3B1bGF0ZWQgd2l0aCBwcm9ncmVzcyBNaWxlc3RvbmVzIGFzIGxpc3RlZCBpbiBwcm9ncmVzc01pbGVzdG9uZXMgYXJyYXlcbiAgICB0aGlzLmNvbnN0cnVjdE1pbGVzdG9uZXMoKTtcblxuICAgIHRoaXMuJHByb2dyZXNzQmFyID0gdGhpcy4kYXVkaW9QbGF5ZXIuZmluZCgnLnByb2dyZXNzLWJhcicpLmVxKDApO1xuICAgIHRoaXMuJGJ1ZmZlciA9IHRoaXMuJHByb2dyZXNzQmFyLmZpbmQoJy5idWZmZXInKS5lcSgwKTtcbiAgICB0aGlzLiRwbGF5ZWQgPSB0aGlzLiRwcm9ncmVzc0Jhci5maW5kKCcucGxheWVkJykuZXEoMCk7XG5cbiAgICB0aGlzLiRjdXJyZW50VGltZSA9IHRoaXMuJGF1ZGlvUGxheWVyLmZpbmQoJy5jdXJyZW50LXRpbWUnKS5lcSgwKTtcbiAgICB0aGlzLiRtaXhMZW5ndGggPSB0aGlzLiRhdWRpb1BsYXllci5maW5kKCcubWl4LWxlbmd0aCcpLmVxKDApO1xuICAgIHRoaXMuJGRpdmlkZXIgPSB0aGlzLiRhdWRpb1BsYXllci5maW5kKCcuZGl2aWRlcicpLmVxKDApO1xuXG4gICAgdGhpcy50cmFja1JlZnJlc2hUaW1lciA9IG51bGw7XG4gIH07XG5cbiAgYXVkaW9QbGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdE1pbGVzdG9uZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHByb2dyZXNzTWlsZXN0b25lcy5mb3JFYWNoKGZ1bmN0aW9uIChtaWxlc3RvbmUpIHtcbiAgICAgIF90aGlzLmlzUGFzdE1pbGVzdG9uZVttaWxlc3RvbmVdID0gZmFsc2U7XG4gICAgfSk7XG4gIH07XG5cbiAgLypcbiAgICAgS2VlcCBjaGVja2luZyBpZiBwcm9ncmVzcyBpcyBwYXN0IHRoZSBuZXh0IG1pbGVzdG9uZVxuICAgICBJZiBpdCBpcywgbG9nIGEgcHJvZ3Jlc3MgZXZlbnQgYW5kIGVuc3VyZSBcbiAgICBubyBtb3JlIHByb2dyZXNzIGV2ZW50cyBhcmUgc2VudCBmb3IgdGhpcyBtaXhcbiAgICovXG4gIGF1ZGlvUGxheWVyLnByb3RvdHlwZS5zZW5kUHJvZ3Jlc3NFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvZ3Jlc3MgPSB0aGlzLnRyYWNrLmN1cnJlbnRUaW1lIC8gdGhpcy50cmFjay5kdXJhdGlvbiAqIDEwMDtcblxuICAgIHByb2dyZXNzTWlsZXN0b25lcy5mb3JFYWNoKGZ1bmN0aW9uIChtaWxlc3RvbmUpIHtcbiAgICAgIGlmIChwcm9ncmVzcyA+IG1pbGVzdG9uZSkge1xuICAgICAgICBpZiAoIV90aGlzMi5pc1Bhc3RNaWxlc3RvbmVbbWlsZXN0b25lXSkge1xuICAgICAgICAgIC8vcGFzdCBtaWxlc3RvbmUgZm9yIHRoZSBmaXJzdCB0aW1lXG4gICAgICAgICAgX3RoaXMyLmlzUGFzdE1pbGVzdG9uZVttaWxlc3RvbmVdID0gdHJ1ZTtcbiAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsICdNaXgnLCAncHJvZ3Jlc3MtJyArIG1pbGVzdG9uZSwgX3RoaXMyLnN0dWIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgLy9QYXVzZSBhbGwgdHJhY2tzIG9uIHRoZSBwYWdlIG90aGVyIHRoYW4gJ3RoaXMnIG9uZVxuICBhdWRpb1BsYXllci5wcm90b3R5cGUucGF1c2VBbGxPdGhlcnMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAkKCcuYXVkaW8tcGxheWVyJykubm90KHRoaXMuJGF1ZGlvUGxheWVyKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBwbGF5ciA9IG5ldyBhdWRpb1BsYXllcigkKHRoaXMpKTtcbiAgICAgIHBsYXlyLnBhdXNlVHJhY2soKTtcbiAgICB9KTtcbiAgfTtcblxuICAvL2NoZWNrIGlmIHRoaXMgcGxheWVyIGlzIHBhdXNlZFxuICBhdWRpb1BsYXllci5wcm90b3R5cGUuaXNQYXVzZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sucGF1c2VkO1xuICB9O1xuXG4gIGF1ZGlvUGxheWVyLnByb3RvdHlwZS5wYXVzZVRyYWNrID0gZnVuY3Rpb24gKCRhdWRpb1BsYXllcikge1xuICAgIHRoaXMudHJhY2sucGF1c2UoKTtcbiAgICB0aGlzLiRhdWRpb1BsYXllci5yZW1vdmVDbGFzcygncGxheWluZycpO1xuICAgIHRoaXMuJHByb2dyZXNzQmFyLnJlbW92ZUNsYXNzKCdleHBhbmRlZCcpO1xuICB9O1xuICBhdWRpb1BsYXllci5wcm90b3R5cGUucGxheVRyYWNrID0gZnVuY3Rpb24gKCRhdWRpb1BsYXllcikge1xuXG4gICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCAnTWl4JywgJ3BsYXknLCB0aGlzLnN0dWIsIHRoaXMucmF0aW5nKTtcblxuICAgIHRoaXMucGF1c2VBbGxPdGhlcnMoKTtcbiAgICB0aGlzLnRyYWNrLnBsYXkoKTtcbiAgICB0aGlzLiRhdWRpb1BsYXllci5hZGRDbGFzcygncGxheWluZycpO1xuICAgIHRoaXMuJHByb2dyZXNzQmFyLmFkZENsYXNzKCdleHBhbmRlZCcpO1xuXG4gICAgdGhpcy5zdGFydEludGVydmFsKCk7XG5cbiAgICB0aGlzLiRjdXJyZW50VGltZS50ZXh0KHRoaXMuY3VycmVudFRpbWVTdHJpbmcoKSk7XG4gICAgdGhpcy4kZGl2aWRlci5zaG93KCk7XG4gICAgdGhpcy4kbWl4TGVuZ3RoLnRleHQodGhpcy5kdXJhdGlvblN0cmluZygpKTtcbiAgfTtcblxuICBhdWRpb1BsYXllci5wcm90b3R5cGUuc3RhcnRJbnRlcnZhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnRyYWNrUmVmcmVzaFRpbWVyID0gc2V0SW50ZXJ2YWwodGhpcy50aWNrLmJpbmQodGhpcyksIDEwMCk7XG4gIH07XG4gIGF1ZGlvUGxheWVyLnByb3RvdHlwZS5jbGVhckludGVydmFsID0gZnVuY3Rpb24gKCkge1xuICAgIGNsZWFySW50ZXJ2YWwodGhpcy50cmFja1JlZnJlc2hUaW1lcik7XG4gIH07XG5cbiAgLy8gT25lIHRpY2sgb2YgdGhlIHNvbmcgcm9sbHMgYnkgYW5kIHRoZSB0aW1lIGlzIHVwZGF0ZVxuICBhdWRpb1BsYXllci5wcm90b3R5cGUudGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLiRjdXJyZW50VGltZS50ZXh0KHRoaXMuY3VycmVudFRpbWVTdHJpbmcoKSk7XG4gICAgdGhpcy51cGRhdGVQcm9ncmVzc0JhcigpO1xuICAgIHRoaXMuc2VuZFByb2dyZXNzRXZlbnRzKCk7XG4gIH07XG5cbiAgYXVkaW9QbGF5ZXIucHJvdG90eXBlLnVwZGF0ZVByb2dyZXNzQmFyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBwbGF5UGVyY2VudGFnZSA9IHRoaXMudHJhY2suY3VycmVudFRpbWUgLyB0aGlzLnRyYWNrLmR1cmF0aW9uICogMTAwO1xuICAgIHRoaXMuJHBsYXllZC5jc3MoJ3dpZHRoJywgcGxheVBlcmNlbnRhZ2UgKyAnJScpO1xuICB9O1xuXG4gIGF1ZGlvUGxheWVyLnByb3RvdHlwZS5jdXJyZW50VGltZVN0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy50aW1lU3RyaW5nKHRoaXMudHJhY2suY3VycmVudFRpbWUpO1xuICB9O1xuXG4gIGF1ZGlvUGxheWVyLnByb3RvdHlwZS5kdXJhdGlvblN0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy50aW1lU3RyaW5nKHRoaXMudHJhY2suZHVyYXRpb24pO1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSB0aW1lIGxpa2UgTU06U1NcbiAgYXVkaW9QbGF5ZXIucHJvdG90eXBlLnRpbWVTdHJpbmcgPSBmdW5jdGlvbiAodGltZSkge1xuXG4gICAgaWYgKGlzTmFOKHRpbWUpKSB7XG4gICAgICAvL2VlaywgdHJ5IGFnYWluLiBIYXJkIHRvIHJlcHJvZHVjZVxuICAgICAgaWYgKGlzTmFOKHRoaXMudHJhY2suZHVyYXRpb24pKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudHJhY2suZHVyYXRpb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNlY29uZHMgPSBcIjBcIiArIE1hdGgucm91bmQodGltZSAlIDYwKTtcbiAgICBzZWNvbmRzID0gc2Vjb25kcy5zdWJzdHIoc2Vjb25kcy5sZW5ndGggLSAyKTtcblxuICAgIHJldHVybiBNYXRoLnJvdW5kKHRpbWUgLyA2MCkgKyAnOicgKyBzZWNvbmRzO1xuICB9O1xuXG4gIC8vIFBsYXkgaWYgcGF1c2VkLCBwYXVzZSBpZiBwbGF5aW5nXG4gIGF1ZGlvUGxheWVyLnByb3RvdHlwZS50b2dnbGVQbGF5UGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5pc1BhdXNlZCgpID8gdGhpcy5wbGF5VHJhY2soKSA6IHRoaXMucGF1c2VUcmFjaygpO1xuICB9O1xuXG4gIGF1ZGlvUGxheWVyLnByb3RvdHlwZS5zZWVrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cbiAgICB2YXIgcGxheVBlcmNlbnRhZ2UgPSBldmVudC5vZmZzZXRYIC8gJChldmVudC50YXJnZXQpLndpZHRoKCk7XG4gICAgdGhpcy50cmFjay5jdXJyZW50VGltZSA9IHBsYXlQZXJjZW50YWdlICogdGhpcy50cmFjay5kdXJhdGlvbjtcbiAgICB0aGlzLnVwZGF0ZVByb2dyZXNzQmFyKCk7XG4gIH07XG5cbiAgJCgnYm9keScpLm9uKCdjbGljaycsICcucGxheS1wYXVzZScsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcGxheWVyID0gbmV3IGF1ZGlvUGxheWVyKCQodGhpcykuY2xvc2VzdCgnLmF1ZGlvLXBsYXllcicpLmVxKDApKTtcbiAgICBwbGF5ZXIudG9nZ2xlUGxheVBhdXNlKCk7XG4gIH0pO1xuXG4gICQoJ2JvZHknKS5vbignY2xpY2snLCAnLnByb2dyZXNzLWJhcicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBwbGF5ZXIgPSBuZXcgYXVkaW9QbGF5ZXIoJCh0aGlzKS5jbG9zZXN0KCcuYXVkaW8tcGxheWVyJykuZXEoMCkpO1xuICAgIHBsYXllci5zZWVrKGV2ZW50KTtcbiAgfSk7XG5cbiAgLy9zZW5kIGdvb2dsZS1hbmFseXRpY3Mgc3RhdHMgZm9yIGEgbWl4IGRvd25sb2FkXG4gICQoJ2JvZHknKS5vbignY2xpY2snLCAnLmRvd25sb2FkJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCAnTWl4JywgJ2Rvd25sb2FkJywgJCh0aGlzKS5jbG9zZXN0KCcuYXVkaW8tcGxheWVyJykuYXR0cignaWQnKSwgJCh0aGlzKS5jbG9zZXN0KCcuYXVkaW8tcGxheWVyJykuZGF0YSgncmF0aW5nJykpO1xuICB9KTtcbn0pO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIVxuICogU3RhcnQgQm9vdHN0cmFwIC0gR3JheXNjYWxlIEJvb3RzdHJhcCBUaGVtZSAoaHR0cDovL3N0YXJ0Ym9vdHN0cmFwLmNvbSlcbiAqIENvZGUgbGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlIHYyLjAuXG4gKiBGb3IgZGV0YWlscywgc2VlIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMC5cbiAqL1xuXG4vLyBqUXVlcnkgdG8gY29sbGFwc2UgdGhlIG5hdmJhciBvbiBzY3JvbGxcbmZ1bmN0aW9uIGNvbGxhcHNlTmF2YmFyKCkge1xuICAgIGlmICgkKFwiLm5hdmJhclwiKS5vZmZzZXQoKS50b3AgPiAkKFwiI3dhdmVzXCIpLm9mZnNldCgpLnRvcCAtIDE1MCkge1xuICAgICAgICAkKFwiLm5hdmJhci1maXhlZC10b3BcIikuYWRkQ2xhc3MoXCJ0b3AtbmF2LWNvbGxhcHNlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIubmF2YmFyLWZpeGVkLXRvcFwiKS5yZW1vdmVDbGFzcyhcInRvcC1uYXYtY29sbGFwc2VcIik7XG4gICAgfVxufVxuXG4kKHdpbmRvdykuc2Nyb2xsKGNvbGxhcHNlTmF2YmFyKTtcbiQoZG9jdW1lbnQpLnJlYWR5KGNvbGxhcHNlTmF2YmFyKTtcblxuLy8galF1ZXJ5IGZvciBwYWdlIHNjcm9sbGluZyBmZWF0dXJlIC0gcmVxdWlyZXMgalF1ZXJ5IEVhc2luZyBwbHVnaW5cbiQoZnVuY3Rpb24gKCkge1xuICAgICQoJ2EucGFnZS1zY3JvbGwnKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgJGFuY2hvciA9ICQodGhpcyk7XG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5zdG9wKCkuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6ICQoJGFuY2hvci5hdHRyKCdocmVmJykpLm9mZnNldCgpLnRvcCAtIDE1MFxuICAgICAgICB9LCAxMDAwLCAnZWFzZUluT3V0RXhwbycpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xufSk7XG5cbi8vIENsb3NlcyB0aGUgUmVzcG9uc2l2ZSBNZW51IG9uIE1lbnUgSXRlbSBDbGlja1xuJCgnLm5hdmJhci1jb2xsYXBzZSB1bCBsaSBhJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgIGlmICgkKHRoaXMpLmF0dHIoJ2NsYXNzJykgIT0gJ2Ryb3Bkb3duLXRvZ2dsZSBhY3RpdmUnICYmICQodGhpcykuYXR0cignY2xhc3MnKSAhPSAnZHJvcGRvd24tdG9nZ2xlJykge1xuICAgICAgICAkKCcubmF2YmFyLXRvZ2dsZTp2aXNpYmxlJykuY2xpY2soKTtcbiAgICB9XG59KTtcbid1c2Ugc3RyaWN0JztcblxuLyogXG4gIEFuaW1hdGUgcmF0aW5ncyBiYXIgYnkgY2hhbmdpbmcgb3BhY2l0eSBvZiBzZXZlcmFsIGJsb2Nrc1xuICAqL1xuJChmdW5jdGlvbiAoKSB7XG5cbiAgLy8gIDYwcy8xMjVicG0gPSA0ODBtc1xuICB2YXIgQU5JTUFUSU9OX1BFUklPRCA9IDYwLjAgLyAxMjUgKiAxMDAwO1xuICB2YXIgREVGQVVMVF9PUEFDSVRZID0gJzAuNCc7XG4gIHZhciBJTkNSRUFTRURfT1BBQ0lUWSA9ICcwLjUnO1xuICB2YXIgJHJhdGluZ19ibG9ja3MgPSAkKCcuYm90dG9tLWJhciAucmF0aW5nLWJsb2NrJyk7XG4gIHZhciBudW1fcmF0aW5ncyA9ICRyYXRpbmdfYmxvY2tzLmxlbmd0aDtcbiAgdmFyIG9yaWdpbmFsX2Jsb2NrX2hlaWdodCA9ICRyYXRpbmdfYmxvY2tzLmVxKDApLmhlaWdodCgpO1xuXG4gIGlmIChudW1fcmF0aW5ncyA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEV2ZXJ5IHggbXMsIGRvLi4uXG4gIC8vICByZXNldCBhbGwgb3BhY2l0aWVzXG4gIC8vICBjaG9vc2UgeCByYW5kb20gcmF0aW5nIGJsb2NrcyB0byBkYXJrZW5cbiAgLy8gIGNob29zZSBhIHJhbmRvbSBibG9jayBmcm9tIHRoYXQgZ3JvdXAgdG8gZGFya2VuLCBvdmVybGFwIG9rXG4gIC8vIHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cbiAgICAvL2VhY2ggdGltZSwgYSBkaWZmZXJlbnQgbnVtYmVyIG9mIGJsb2NrcyBhcmUgY2hvc2VuXG4gICAgdmFyIGJsb2Nrc190b19ibGFuayA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG51bV9yYXRpbmdzKSArIDE7XG5cbiAgICAkcmF0aW5nX2Jsb2Nrcy5ub3QoJy5hY3RpdmUnKS5jc3MoJ29wYWNpdHknLCBERUZBVUxUX09QQUNJVFkpO1xuICAgIC8vIC5jc3MoJ2hlaWdodCcsIG9yaWdpbmFsX2Jsb2NrX2hlaWdodCsncHgnKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmxvY2tzX3RvX2JsYW5rOyBpKyspIHtcbiAgICAgIHZhciByYW5kX2Jsb2NrX2luZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbnVtX3JhdGluZ3MpICsgMTtcblxuICAgICAgaWYgKCEkcmF0aW5nX2Jsb2Nrcy5lcShyYW5kX2Jsb2NrX2luZGV4KS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgJHJhdGluZ19ibG9ja3MuZXEocmFuZF9ibG9ja19pbmRleCkuY3NzKCdvcGFjaXR5JywgSU5DUkVBU0VEX09QQUNJVFkpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgQU5JTUFUSU9OX1BFUklPRCk7XG5cbiAgLy8gY29udHJvbCBzaG93aW5nIFYtcmF0aW5nIGRlc2NyaXB0aW9ucyBvbiBob3ZlciBvZiBWLWNvbG9yIGJ1dHRvblxuICAkKCcuYm90dG9tLWJhciA+IGRpdicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmF0aW5nID0gJCh0aGlzKS5maW5kKCcucmF0aW5nLWJsb2NrJykuZGF0YSgncmF0aW5nJyk7XG4gICAgc2hvd0FuZEhpZ2hsaWdodFJhdGluZyhyYXRpbmcpO1xuICB9KTtcblxuICBmdW5jdGlvbiBzaG93QW5kSGlnaGxpZ2h0UmF0aW5nKHJhdGluZykge1xuXG4gICAgLy9oaWRlIGFsbCBvdGhlciBkZXNjcmlwdGlvbnNcbiAgICAkKCcudi1kZXNjcmlwdGlvbnMgPiBwJykubm90KCcudi1kZXNjcmlwdGlvbnMgPiBwW2RhdGEtcmF0aW5nPVwiJyArIHJhdGluZyArICdcIl0nKS5oaWRlKCk7XG5cbiAgICAvL3JlbW92ZSBvdGhlciBhY3RpdmUgb3BhY2l0aWVzXG4gICAgJCgnLmJvdHRvbS1iYXIgPiBkaXYgLnJhdGluZy1ibG9jaycpLm5vdCgnLmJvdHRvbS1iYXIgPiBkaXYgLnJhdGluZy1ibG9ja1tkYXRhLXJhdGluZz1cIicgKyByYXRpbmcgKyAnXCJdJykuY3NzKCdvcGFjaXR5JywgREVGQVVMVF9PUEFDSVRZKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAkKCcuYm90dG9tLWJhciA+IGRpdiAucmF0aW5nLWJsb2NrW2RhdGEtcmF0aW5nPVwiJyArIHJhdGluZyArICdcIl0nKS5jc3MoJ29wYWNpdHknLCAxKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAkKCcudi1kZXNjcmlwdGlvbnMgPiBwW2RhdGEtcmF0aW5nPVwiJyArIHJhdGluZyArICdcIl0nKS5zaG93KCk7XG4gIH1cbn0pO1xuXG4kKGZ1bmN0aW9uICgpIHtcblxuICAvL2dldCB0aGUgc3R1YiBmcm9tIHRoZSB1cmwsIGxpa2UgZGptb3VudGFpbm91cy5jb20/Ymx1ZXByaW50LTE5LXdhcm11cFxuICB2YXIgc2VhcmNoID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5yZXBsYWNlKFwiP1wiLCBcIlwiKTtcblxuICAvL3Njcm9sbCB0aGF0IGVsZW1lbnQncyB0b3AgIFxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAkKCcubWl4Jykubm90KCcuJyArIHNlYXJjaCkuY3NzKCdvcGFjaXR5JywgMC41KTtcbiAgICAkKCcubWl4LWdyb3VwX190aXRsZSwgLmdyb3VwLWRlc2NyaXB0aW9uJykuY3NzKCdvcGFjaXR5JywgMC41KTtcbiAgfSwgMCk7XG5cbiAgLy93aGVuIGFueXRoaW5nIGlzIGNsaWNrZWQsIHNldCB0aGUgb3BhY2l0eSBvZiB0aGUgbWl4ZXMgYmFjayB0byAxXG4gICQoJyonKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgJCgnLm1peCcpLmNzcygnb3BhY2l0eScsIDEpO1xuICB9KTtcblxuICAkKCcjbWl4ZXMnKS5vbignY2xpY2snLCAnLm1peF9fZGV0YWlscyAucmF0aW5nJywgZnVuY3Rpb24gKCkge1xuICAgICQoJy5yYXRpbmctYmxvY2tbZGF0YS1yYXRpbmc9XCInICsgJCh0aGlzKS5kYXRhKCdyYXRpbmcnKSArICdcIl0nKS5jbG9zZXN0KCdkaXYnKS50cmlnZ2VyKCdob3ZlcicpO1xuICAgICQoJy5yYXRpbmctYmxvY2tbZGF0YS1yYXRpbmc9XCInICsgJCh0aGlzKS5kYXRhKCdyYXRpbmcnKSArICdcIl0nKS5jbG9zZXN0KCdkaXYnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICQoJ2h0bWwsIGJvZHknKS5zY3JvbGxUb3AoJCgnLmJvdHRvbS1iYXInKS5vZmZzZXQoKS50b3AgLSAxMzApO1xuICB9KTtcbn0pO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbiQoZnVuY3Rpb24gKCkge1xuXG4gIC8vIG1peGVzIE1VU1QgYmUgbmFtZWQgZGotbW91dGFpbm91cy17c2x1Z30uKG1wMy9tNGEpXG4gIC8vIGkuZS4gZGotbW91bnRhaW5vdXMtdmEtdGVjaC1ob3VzZVxuXG4gIHZhciBjYWxtX21peGVzID0ge1xuICAgIG1peGVzOiBbXG4gICAgLy9uZXcgbWl4IGdvZXMgaGVyZVxuICAgIHtcbiAgICAgIHRpdGxlOiBcIlRoZSBFaWdlclwiLFxuICAgICAgZ2VucmVzOiBcIlRlY2ggSG91c2VcIixcbiAgICAgIGRhdGU6IFwiU2VwdCAyMDE2XCIsXG4gICAgICBzbHVnOiBcInZhLXRlY2gtaG91c2VcIixcbiAgICAgIHJhdGluZzogM1xuICAgIH0sIHtcbiAgICAgIHRpdGxlOiBcIkdhcmliYWxkaVwiLFxuICAgICAgZ2VucmVzOiBcIkRlZXAgSG91c2VcIixcbiAgICAgIGRhdGU6IFwiSnVuZSAyMDE2XCIsXG4gICAgICBzbHVnOiBcInZhLWRlZXAtaG91c2UtdjJcIixcbiAgICAgIHJhdGluZzogMlxuICAgIH1dXG4gIH07XG5cbiAgdmFyIGludGVuc2VfbWl4ZXMgPSB7XG4gICAgbWl4ZXM6IFtcbiAgICAvL25ldyBtaXggZ29lcyBoZXJlXG4gICAge1xuICAgICAgdGl0bGU6IFwiQmx1ZXByaW50IDE5dGggV2FybXVwXCIsXG4gICAgICBnZW5yZXM6IFwiUmV6eiBHcml6IEdyaW1lIFcuUy5OIERGcmFuY2lzXCIsXG4gICAgICBkYXRlOiBcIk9jdG9iZXIgMjAxNlwiLFxuICAgICAgc2x1ZzogXCJibHVlcHJpbnQtMTktd2FybXVwXCIsXG4gICAgICByYXRpbmc6IDlcbiAgICB9LCB7XG4gICAgICB0aXRsZTogXCJMaXZlIEAgQmlydGhSYXZlIDIwMTZcIixcbiAgICAgIGdlbnJlczogXCJCYXNzIEZ1bmssIFRyYXAsIER1YlwiLFxuICAgICAgZGF0ZTogXCJTZXB0IDI0LCAyMDE2XCIsXG4gICAgICBzbHVnOiBcImxpdmUtYmlydGhyYXZlLTIwMTYtYmFzcy1mdW5rLWR1YlwiLFxuICAgICAgcmF0aW5nOiA4XG4gICAgfSwge1xuICAgICAgdGl0bGU6IFwiQmxhY2sgVHVza1wiLFxuICAgICAgZ2VucmVzOiBcIlRyYXAgJiBEdWJzdGVwXCIsXG4gICAgICBkYXRlOiBcIkF1Z3VzdCAyMDE2XCIsXG4gICAgICBzbHVnOiBcInZhLWR1YnRyYXBcIixcbiAgICAgIHJhdGluZzogOVxuICAgIH0sIHtcbiAgICAgIHRpdGxlOiBcIlNldmVuIExpb25zIHdhcm11cFwiLFxuICAgICAgZ2VucmVzOiBcIkRyZWFtc3RlcFwiLFxuICAgICAgZGF0ZTogXCJPY3RvYmVyIDIwMTZcIixcbiAgICAgIHNsdWc6IFwic2V2ZW4tbGlvbnMtd2FybS11cC1taXhcIixcbiAgICAgIHJhdGluZzogN1xuICAgIH1dXG4gIH07IC8vIGludGVuc2UgbWl4ZXNcblxuICAvLyAvL2luamVjdCBoYW5kbGViYXJzIHRlbXBsYXRlcyB3aXRoIG1peCBkYXRhXG4gIGluamVjdFRlbXBsYXRlcyhpbnRlbnNlX21peGVzLCAnaW50ZW5zZScpO1xuICBpbmplY3RUZW1wbGF0ZXMoY2FsbV9taXhlcywgJ2NhbG0nKTtcblxuICBmdW5jdGlvbiBpbmplY3RUZW1wbGF0ZXMoZGF0YSwgdHlwZSkge1xuXG4gICAgdmFyIGh0bWwgPSBNeUFwcC50ZW1wbGF0ZXMubWl4ZXMoZGF0YSk7XG4gICAgJCgnI21peGVzLXRtcGwtJyArIHR5cGUpLmh0bWwoaHRtbCk7XG4gIH1cbn0pOyIsIi8qIVxuICogU3RhcnQgQm9vdHN0cmFwIC0gR3JheXNjYWxlIEJvb3RzdHJhcCBUaGVtZSAoaHR0cDovL3N0YXJ0Ym9vdHN0cmFwLmNvbSlcbiAqIENvZGUgbGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlIHYyLjAuXG4gKiBGb3IgZGV0YWlscywgc2VlIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMC5cbiAqL1xuXG4vLyBqUXVlcnkgdG8gY29sbGFwc2UgdGhlIG5hdmJhciBvbiBzY3JvbGxcbmZ1bmN0aW9uIGNvbGxhcHNlTmF2YmFyKCkge1xuICAgIGlmICgkKFwiLm5hdmJhclwiKS5vZmZzZXQoKS50b3AgPiAkKFwiI3dhdmVzXCIpLm9mZnNldCgpLnRvcCAtIDE1MCkge1xuICAgICAgICAkKFwiLm5hdmJhci1maXhlZC10b3BcIikuYWRkQ2xhc3MoXCJ0b3AtbmF2LWNvbGxhcHNlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIubmF2YmFyLWZpeGVkLXRvcFwiKS5yZW1vdmVDbGFzcyhcInRvcC1uYXYtY29sbGFwc2VcIik7XG4gICAgfVxufVxuXG4kKHdpbmRvdykuc2Nyb2xsKGNvbGxhcHNlTmF2YmFyKTtcbiQoZG9jdW1lbnQpLnJlYWR5KGNvbGxhcHNlTmF2YmFyKTtcblxuLy8galF1ZXJ5IGZvciBwYWdlIHNjcm9sbGluZyBmZWF0dXJlIC0gcmVxdWlyZXMgalF1ZXJ5IEVhc2luZyBwbHVnaW5cbiQoZnVuY3Rpb24oKSB7XG4gICAgJCgnYS5wYWdlLXNjcm9sbCcpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgdmFyICRhbmNob3IgPSAkKHRoaXMpO1xuICAgICAgICAkKCdodG1sLCBib2R5Jykuc3RvcCgpLmFuaW1hdGUoe1xuICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKCRhbmNob3IuYXR0cignaHJlZicpKS5vZmZzZXQoKS50b3AtMTUwXG4gICAgICAgIH0sIDEwMDAsICdlYXNlSW5PdXRFeHBvJyk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG59KTtcblxuLy8gQ2xvc2VzIHRoZSBSZXNwb25zaXZlIE1lbnUgb24gTWVudSBJdGVtIENsaWNrXG4kKCcubmF2YmFyLWNvbGxhcHNlIHVsIGxpIGEnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgaWYgKCQodGhpcykuYXR0cignY2xhc3MnKSAhPSAnZHJvcGRvd24tdG9nZ2xlIGFjdGl2ZScgJiYgJCh0aGlzKS5hdHRyKCdjbGFzcycpICE9ICdkcm9wZG93bi10b2dnbGUnKSB7XG4gICAgJCgnLm5hdmJhci10b2dnbGU6dmlzaWJsZScpLmNsaWNrKCk7XG4gIH1cbn0pO1xuIiwiXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSFRNTE1lZGlhRWxlbWVudFxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvR3VpZGUvSFRNTC9Vc2luZ19IVE1MNV9hdWRpb19hbmRfdmlkZW9cblxuJChmdW5jdGlvbigpe1xuXG4gIGNvbnN0IHByb2dyZXNzTWlsZXN0b25lcyA9IFsxLCAyLCA0LCA4LCAxMCwgMjUsIDUwLCA3NSwgOTVdO1xuXG4gIHZhciBhdWRpb1BsYXllciA9IGZ1bmN0aW9uKCRhdWRpb1BsYXllcil7XG5cbiAgICB0aGlzLiRhdWRpb1BsYXllciA9ICRhdWRpb1BsYXllcjtcbiAgICB0aGlzLnN0dWIgPSB0aGlzLiRhdWRpb1BsYXllci5hdHRyKCdpZCcpO1xuICAgIHRoaXMucmF0aW5nID0gdGhpcy4kYXVkaW9QbGF5ZXIuZGF0YSgncmF0aW5nJyk7XG5cbiAgICB0aGlzLiRwbGF5UGF1c2VCdG4gPSB0aGlzLiRhdWRpb1BsYXllci5maW5kKCcucGxheS1wYXVzZScpLmVxKDApO1xuICAgIHRoaXMuJHRyYWNrID0gdGhpcy4kYXVkaW9QbGF5ZXIuZmluZCgnYXVkaW8nKS5lcSgwKTtcbiAgICB0aGlzLnRyYWNrID0gdGhpcy4kdHJhY2suZ2V0KDApO1xuXG4gICAgdGhpcy5pc1Bhc3RNaWxlc3RvbmUgPSB7fTsgLy9ldmVudHVhbGx5IHBvcHVsYXRlZCB3aXRoIHByb2dyZXNzIE1pbGVzdG9uZXMgYXMgbGlzdGVkIGluIHByb2dyZXNzTWlsZXN0b25lcyBhcnJheVxuICAgIHRoaXMuY29uc3RydWN0TWlsZXN0b25lcygpO1xuXG4gICAgdGhpcy4kcHJvZ3Jlc3NCYXIgPSB0aGlzLiRhdWRpb1BsYXllci5maW5kKCcucHJvZ3Jlc3MtYmFyJykuZXEoMCk7XG4gICAgdGhpcy4kYnVmZmVyICAgICAgPSB0aGlzLiRwcm9ncmVzc0Jhci5maW5kKCcuYnVmZmVyJykuZXEoMCk7XG4gICAgdGhpcy4kcGxheWVkICAgICAgPSB0aGlzLiRwcm9ncmVzc0Jhci5maW5kKCcucGxheWVkJykuZXEoMCk7XG5cbiAgICB0aGlzLiRjdXJyZW50VGltZSA9IHRoaXMuJGF1ZGlvUGxheWVyLmZpbmQoJy5jdXJyZW50LXRpbWUnKS5lcSgwKTtcbiAgICB0aGlzLiRtaXhMZW5ndGggICA9IHRoaXMuJGF1ZGlvUGxheWVyLmZpbmQoJy5taXgtbGVuZ3RoJykuZXEoMCk7XG4gICAgdGhpcy4kZGl2aWRlciAgICAgPSB0aGlzLiRhdWRpb1BsYXllci5maW5kKCcuZGl2aWRlcicpLmVxKDApO1xuXG4gICAgdGhpcy50cmFja1JlZnJlc2hUaW1lciA9IG51bGw7XG4gIH1cblxuICBhdWRpb1BsYXllci5wcm90b3R5cGUuY29uc3RydWN0TWlsZXN0b25lcyA9IGZ1bmN0aW9uKCl7XG4gICAgcHJvZ3Jlc3NNaWxlc3RvbmVzLmZvckVhY2goKG1pbGVzdG9uZSkgPT4ge1xuICAgICAgdGhpcy5pc1Bhc3RNaWxlc3RvbmVbbWlsZXN0b25lXSA9IGZhbHNlO1xuICAgIH0pO1xuICB9XG5cbiAgLypcblxuICAgIEtlZXAgY2hlY2tpbmcgaWYgcHJvZ3Jlc3MgaXMgcGFzdCB0aGUgbmV4dCBtaWxlc3RvbmVcblxuICAgIElmIGl0IGlzLCBsb2cgYSBwcm9ncmVzcyBldmVudCBhbmQgZW5zdXJlIFxuICAgIG5vIG1vcmUgcHJvZ3Jlc3MgZXZlbnRzIGFyZSBzZW50IGZvciB0aGlzIG1peFxuXG4gICovXG4gIGF1ZGlvUGxheWVyLnByb3RvdHlwZS5zZW5kUHJvZ3Jlc3NFdmVudHMgPSBmdW5jdGlvbigpe1xuXG4gICAgbGV0IHByb2dyZXNzID0gKHRoaXMudHJhY2suY3VycmVudFRpbWUgLyB0aGlzLnRyYWNrLmR1cmF0aW9uKSAqIDEwMDtcblxuICAgIHByb2dyZXNzTWlsZXN0b25lcy5mb3JFYWNoKChtaWxlc3RvbmUpID0+IHtcbiAgICAgIGlmKHByb2dyZXNzID4gbWlsZXN0b25lKXtcbiAgICAgICAgaWYoIXRoaXMuaXNQYXN0TWlsZXN0b25lW21pbGVzdG9uZV0peyAgLy9wYXN0IG1pbGVzdG9uZSBmb3IgdGhlIGZpcnN0IHRpbWVcbiAgICAgICAgICB0aGlzLmlzUGFzdE1pbGVzdG9uZVttaWxlc3RvbmVdID0gdHJ1ZTtcbiAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsICdNaXgnLCAncHJvZ3Jlc3MtJyttaWxlc3RvbmUsIHRoaXMuc3R1Yik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTsgXG4gIH1cblxuICAvL1BhdXNlIGFsbCB0cmFja3Mgb24gdGhlIHBhZ2Ugb3RoZXIgdGhhbiAndGhpcycgb25lXG4gIGF1ZGlvUGxheWVyLnByb3RvdHlwZS5wYXVzZUFsbE90aGVycyA9IGZ1bmN0aW9uKCl7XG5cbiAgICAkKCcuYXVkaW8tcGxheWVyJykubm90KHRoaXMuJGF1ZGlvUGxheWVyKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgcGxheXIgPSBuZXcgYXVkaW9QbGF5ZXIoJCh0aGlzKSk7XG4gICAgICBwbGF5ci5wYXVzZVRyYWNrKCk7XG4gICAgfSk7XG4gIH1cblxuICAvL2NoZWNrIGlmIHRoaXMgcGxheWVyIGlzIHBhdXNlZFxuICBhdWRpb1BsYXllci5wcm90b3R5cGUuaXNQYXVzZWQgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiB0aGlzLnRyYWNrLnBhdXNlZDtcbiAgfVxuXG4gIGF1ZGlvUGxheWVyLnByb3RvdHlwZS5wYXVzZVRyYWNrID0gZnVuY3Rpb24oJGF1ZGlvUGxheWVyKXtcbiAgICB0aGlzLnRyYWNrLnBhdXNlKCk7XG4gICAgdGhpcy4kYXVkaW9QbGF5ZXIucmVtb3ZlQ2xhc3MoJ3BsYXlpbmcnKTtcbiAgICB0aGlzLiRwcm9ncmVzc0Jhci5yZW1vdmVDbGFzcygnZXhwYW5kZWQnKTtcbiAgfVxuICBhdWRpb1BsYXllci5wcm90b3R5cGUucGxheVRyYWNrID0gZnVuY3Rpb24oJGF1ZGlvUGxheWVyKXtcblxuICAgIGdhKCdzZW5kJywgJ2V2ZW50JywgJ01peCcsICdwbGF5JywgXG4gICAgICB0aGlzLnN0dWIsIHRoaXMucmF0aW5nKTtcblxuICAgIHRoaXMucGF1c2VBbGxPdGhlcnMoKTtcbiAgICB0aGlzLnRyYWNrLnBsYXkoKTtcbiAgICB0aGlzLiRhdWRpb1BsYXllci5hZGRDbGFzcygncGxheWluZycpO1xuICAgIHRoaXMuJHByb2dyZXNzQmFyLmFkZENsYXNzKCdleHBhbmRlZCcpO1xuXG4gICAgdGhpcy5zdGFydEludGVydmFsKCk7XG5cbiAgICB0aGlzLiRjdXJyZW50VGltZS50ZXh0KHRoaXMuY3VycmVudFRpbWVTdHJpbmcoKSk7XG4gICAgdGhpcy4kZGl2aWRlci5zaG93KCk7XG4gICAgdGhpcy4kbWl4TGVuZ3RoLnRleHQodGhpcy5kdXJhdGlvblN0cmluZygpKTtcbiAgfVxuXG4gIGF1ZGlvUGxheWVyLnByb3RvdHlwZS5zdGFydEludGVydmFsID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLnRyYWNrUmVmcmVzaFRpbWVyID0gc2V0SW50ZXJ2YWwodGhpcy50aWNrLmJpbmQodGhpcyksIDEwMCk7XG4gIH1cbiAgYXVkaW9QbGF5ZXIucHJvdG90eXBlLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbigpe1xuICAgIGNsZWFySW50ZXJ2YWwodGhpcy50cmFja1JlZnJlc2hUaW1lcik7XG4gIH1cblxuICAvLyBPbmUgdGljayBvZiB0aGUgc29uZyByb2xscyBieSBhbmQgdGhlIHRpbWUgaXMgdXBkYXRlXG4gIGF1ZGlvUGxheWVyLnByb3RvdHlwZS50aWNrID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLiRjdXJyZW50VGltZS50ZXh0KHRoaXMuY3VycmVudFRpbWVTdHJpbmcoKSk7XG4gICAgdGhpcy51cGRhdGVQcm9ncmVzc0JhcigpO1xuICAgIHRoaXMuc2VuZFByb2dyZXNzRXZlbnRzKCk7XG4gIH1cblxuICBhdWRpb1BsYXllci5wcm90b3R5cGUudXBkYXRlUHJvZ3Jlc3NCYXIgPSBmdW5jdGlvbigpe1xuICAgIHZhciBwbGF5UGVyY2VudGFnZSA9ICh0aGlzLnRyYWNrLmN1cnJlbnRUaW1lIC8gdGhpcy50cmFjay5kdXJhdGlvbikgKiAxMDA7XG4gICAgdGhpcy4kcGxheWVkLmNzcygnd2lkdGgnLCBwbGF5UGVyY2VudGFnZSsnJScpO1xuICB9XG5cbiAgYXVkaW9QbGF5ZXIucHJvdG90eXBlLmN1cnJlbnRUaW1lU3RyaW5nID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gdGhpcy50aW1lU3RyaW5nKHRoaXMudHJhY2suY3VycmVudFRpbWUpO1xuICB9XG5cbiAgYXVkaW9QbGF5ZXIucHJvdG90eXBlLmR1cmF0aW9uU3RyaW5nID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gdGhpcy50aW1lU3RyaW5nKHRoaXMudHJhY2suZHVyYXRpb24pO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHRpbWUgbGlrZSBNTTpTU1xuICBhdWRpb1BsYXllci5wcm90b3R5cGUudGltZVN0cmluZyA9IGZ1bmN0aW9uKHRpbWUpe1xuXG4gICAgaWYoaXNOYU4odGltZSkpXG4gICAgeyAvL2VlaywgdHJ5IGFnYWluLiBIYXJkIHRvIHJlcHJvZHVjZVxuICAgICAgaWYoaXNOYU4odGhpcy50cmFjay5kdXJhdGlvbikpe1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9ZWxzZSB7XG4gICAgICAgIHRoaXMudHJhY2suZHVyYXRpb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNlY29uZHMgPSBcIjBcIiArIE1hdGgucm91bmQodGltZSU2MCk7XG4gICAgc2Vjb25kcyA9IHNlY29uZHMuc3Vic3RyKHNlY29uZHMubGVuZ3RoLTIpO1xuXG4gICAgcmV0dXJuICBNYXRoLnJvdW5kKHRpbWUvNjApKyc6JytzZWNvbmRzO1xuICB9XG5cbiAgLy8gUGxheSBpZiBwYXVzZWQsIHBhdXNlIGlmIHBsYXlpbmdcbiAgYXVkaW9QbGF5ZXIucHJvdG90eXBlLnRvZ2dsZVBsYXlQYXVzZSA9IGZ1bmN0aW9uKCl7XG4gICAgdGhpcy5pc1BhdXNlZCgpID8gdGhpcy5wbGF5VHJhY2soKSA6IHRoaXMucGF1c2VUcmFjaygpO1xuICB9XG5cbiAgYXVkaW9QbGF5ZXIucHJvdG90eXBlLnNlZWsgPSBmdW5jdGlvbihldmVudCl7XG5cbiAgICB2YXIgcGxheVBlcmNlbnRhZ2UgPSBldmVudC5vZmZzZXRYIC8gJChldmVudC50YXJnZXQpLndpZHRoKCk7XG4gICAgdGhpcy50cmFjay5jdXJyZW50VGltZSA9IHBsYXlQZXJjZW50YWdlICogdGhpcy50cmFjay5kdXJhdGlvbjtcbiAgICB0aGlzLnVwZGF0ZVByb2dyZXNzQmFyKCk7XG4gIH0gIFxuXG4gICQoJ2JvZHknKS5vbignY2xpY2snLCAnLnBsYXktcGF1c2UnLCBmdW5jdGlvbigpe1xuICAgIHZhciBwbGF5ZXIgPSBuZXcgYXVkaW9QbGF5ZXIoJCh0aGlzKS5jbG9zZXN0KCcuYXVkaW8tcGxheWVyJykuZXEoMCkpO1xuICAgIHBsYXllci50b2dnbGVQbGF5UGF1c2UoKTtcbiAgfSk7XG5cbiAgJCgnYm9keScpLm9uKCdjbGljaycsICcucHJvZ3Jlc3MtYmFyJywgZnVuY3Rpb24oZXZlbnQpe1xuICAgIHZhciBwbGF5ZXIgPSBuZXcgYXVkaW9QbGF5ZXIoJCh0aGlzKS5jbG9zZXN0KCcuYXVkaW8tcGxheWVyJykuZXEoMCkpO1xuICAgIHBsYXllci5zZWVrKGV2ZW50KTtcbiAgfSk7XG5cbiAgLy9zZW5kIGdvb2dsZS1hbmFseXRpY3Mgc3RhdHMgZm9yIGEgbWl4IGRvd25sb2FkXG4gICQoJ2JvZHknKS5vbignY2xpY2snLCAnLmRvd25sb2FkJywgZnVuY3Rpb24oZXZlbnQpe1xuICAgIGdhKCdzZW5kJywgJ2V2ZW50JywgJ01peCcsICdkb3dubG9hZCcsIFxuICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuYXVkaW8tcGxheWVyJykuYXR0cignaWQnKSwgXG4gICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5hdWRpby1wbGF5ZXInKS5kYXRhKCdyYXRpbmcnKSk7XG4gIH0pO1xuXG59KTsgIiwiICBcbi8qIFxuICBBbmltYXRlIHJhdGluZ3MgYmFyIGJ5IGNoYW5naW5nIG9wYWNpdHkgb2Ygc2V2ZXJhbCBibG9ja3NcbiAgKi9cbiQoZnVuY3Rpb24oKXtcbiAgXG4gIC8vICA2MHMvMTI1YnBtID0gNDgwbXNcbiAgdmFyIEFOSU1BVElPTl9QRVJJT0QgPSAoNjAuMC8xMjUpKjEwMDA7XG4gIHZhciBERUZBVUxUX09QQUNJVFkgPSAnMC40JztcbiAgdmFyIElOQ1JFQVNFRF9PUEFDSVRZID0gJzAuNSc7XG4gIHZhciAkcmF0aW5nX2Jsb2NrcyA9ICQoJy5ib3R0b20tYmFyIC5yYXRpbmctYmxvY2snKTtcbiAgdmFyIG51bV9yYXRpbmdzID0gJHJhdGluZ19ibG9ja3MubGVuZ3RoO1xuICB2YXIgb3JpZ2luYWxfYmxvY2tfaGVpZ2h0ID0gJHJhdGluZ19ibG9ja3MuZXEoMCkuaGVpZ2h0KCk7XG5cbiAgaWYobnVtX3JhdGluZ3MgPT09IDApe1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEV2ZXJ5IHggbXMsIGRvLi4uXG4gIC8vICByZXNldCBhbGwgb3BhY2l0aWVzXG4gIC8vICBjaG9vc2UgeCByYW5kb20gcmF0aW5nIGJsb2NrcyB0byBkYXJrZW5cbiAgLy8gIGNob29zZSBhIHJhbmRvbSBibG9jayBmcm9tIHRoYXQgZ3JvdXAgdG8gZGFya2VuLCBvdmVybGFwIG9rXG4gIC8vIHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICBzZXRJbnRlcnZhbCgoKSA9PiB7XG5cbiAgICAvL2VhY2ggdGltZSwgYSBkaWZmZXJlbnQgbnVtYmVyIG9mIGJsb2NrcyBhcmUgY2hvc2VuXG4gICAgdmFyIGJsb2Nrc190b19ibGFuayA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpudW1fcmF0aW5ncykrMTtcbiAgICBcbiAgICAkcmF0aW5nX2Jsb2Nrcy5ub3QoJy5hY3RpdmUnKS5jc3MoJ29wYWNpdHknLCBERUZBVUxUX09QQUNJVFkpO1xuICAgICAgICAgICAgICAgICAgLy8gLmNzcygnaGVpZ2h0Jywgb3JpZ2luYWxfYmxvY2tfaGVpZ2h0KydweCcpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBibG9ja3NfdG9fYmxhbms7IGkrKykge1xuICAgICAgdmFyIHJhbmRfYmxvY2tfaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqbnVtX3JhdGluZ3MpKzE7XG5cbiAgICAgIGlmKCEkcmF0aW5nX2Jsb2Nrcy5lcShyYW5kX2Jsb2NrX2luZGV4KS5oYXNDbGFzcygnYWN0aXZlJykpe1xuICAgICAgICAkcmF0aW5nX2Jsb2Nrcy5lcShyYW5kX2Jsb2NrX2luZGV4KVxuICAgICAgICAgICAgICAgICAgICAgIC5jc3MoJ29wYWNpdHknLCBJTkNSRUFTRURfT1BBQ0lUWSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBBTklNQVRJT05fUEVSSU9EKTtcblxuXG4gIC8vIGNvbnRyb2wgc2hvd2luZyBWLXJhdGluZyBkZXNjcmlwdGlvbnMgb24gaG92ZXIgb2YgVi1jb2xvciBidXR0b25cbiAgJCgnLmJvdHRvbS1iYXIgPiBkaXYnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgIHZhciByYXRpbmcgPSAkKHRoaXMpLmZpbmQoJy5yYXRpbmctYmxvY2snKS5kYXRhKCdyYXRpbmcnKTtcbiAgICBzaG93QW5kSGlnaGxpZ2h0UmF0aW5nKHJhdGluZyk7XG4gIH0pO1xuXG5cbiAgZnVuY3Rpb24gc2hvd0FuZEhpZ2hsaWdodFJhdGluZyhyYXRpbmcpe1xuICAgIFxuICAgIC8vaGlkZSBhbGwgb3RoZXIgZGVzY3JpcHRpb25zXG4gICAgJCgnLnYtZGVzY3JpcHRpb25zID4gcCcpXG4gICAgICAubm90KCcudi1kZXNjcmlwdGlvbnMgPiBwW2RhdGEtcmF0aW5nPVwiJytyYXRpbmcrJ1wiXScpXG4gICAgICAuaGlkZSgpO1xuXG4gICAgLy9yZW1vdmUgb3RoZXIgYWN0aXZlIG9wYWNpdGllc1xuICAgICQoJy5ib3R0b20tYmFyID4gZGl2IC5yYXRpbmctYmxvY2snKVxuICAgICAgLm5vdCgnLmJvdHRvbS1iYXIgPiBkaXYgLnJhdGluZy1ibG9ja1tkYXRhLXJhdGluZz1cIicrcmF0aW5nKydcIl0nKVxuICAgICAgLmNzcygnb3BhY2l0eScsIERFRkFVTFRfT1BBQ0lUWSlcbiAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAkKCcuYm90dG9tLWJhciA+IGRpdiAucmF0aW5nLWJsb2NrW2RhdGEtcmF0aW5nPVwiJytyYXRpbmcrJ1wiXScpXG4gICAgICAuY3NzKCdvcGFjaXR5JywgMSlcbiAgICAgIC5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAkKCcudi1kZXNjcmlwdGlvbnMgPiBwW2RhdGEtcmF0aW5nPVwiJytyYXRpbmcrJ1wiXScpLnNob3coKTtcbiAgfVxufSk7XG5cblxuJChmdW5jdGlvbigpe1xuXG4gIC8vZ2V0IHRoZSBzdHViIGZyb20gdGhlIHVybCwgbGlrZSBkam1vdW50YWlub3VzLmNvbT9ibHVlcHJpbnQtMTktd2FybXVwXG4gIHZhciBzZWFyY2ggPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnJlcGxhY2UoXCI/XCIsIFwiXCIpO1xuIFxuICAvL3Njcm9sbCB0aGF0IGVsZW1lbnQncyB0b3AgIFxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IFxuICAgICQoJy5taXgnKS5ub3QoJy4nK3NlYXJjaCkuY3NzKCdvcGFjaXR5JywgMC41KTtcbiAgICAkKCcubWl4LWdyb3VwX190aXRsZSwgLmdyb3VwLWRlc2NyaXB0aW9uJykuY3NzKCdvcGFjaXR5JywgMC41KTtcbiAgfSwgMCk7IFxuXG4gIC8vd2hlbiBhbnl0aGluZyBpcyBjbGlja2VkLCBzZXQgdGhlIG9wYWNpdHkgb2YgdGhlIG1peGVzIGJhY2sgdG8gMVxuICAkKCcqJykub24oJ2NsaWNrJywgKCkgPT4geyBcbiAgICAkKCcubWl4JykuY3NzKCdvcGFjaXR5JywgMSk7XG4gIH0pOyBcbiAgICBcbiAgJCgnI21peGVzJykub24oJ2NsaWNrJywgJy5taXhfX2RldGFpbHMgLnJhdGluZycsIGZ1bmN0aW9uKCl7XG4gICAgJCgnLnJhdGluZy1ibG9ja1tkYXRhLXJhdGluZz1cIicrJCh0aGlzKS5kYXRhKCdyYXRpbmcnKSsnXCJdJykuY2xvc2VzdCgnZGl2JykudHJpZ2dlcignaG92ZXInKTtcbiAgICAkKCcucmF0aW5nLWJsb2NrW2RhdGEtcmF0aW5nPVwiJyskKHRoaXMpLmRhdGEoJ3JhdGluZycpKydcIl0nKS5jbG9zZXN0KCdkaXYnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICQoJ2h0bWwsIGJvZHknKS5zY3JvbGxUb3AoJCgnLmJvdHRvbS1iYXInKS5vZmZzZXQoKS50b3AtMTMwKTtcbiAgfSk7XG4gIFxufSk7ICAiLCIkKGZ1bmN0aW9uICAoKSB7XG5cbiAgLy8gbWl4ZXMgTVVTVCBiZSBuYW1lZCBkai1tb3V0YWlub3VzLXtzbHVnfS4obXAzL200YSlcbiAgLy8gaS5lLiBkai1tb3VudGFpbm91cy12YS10ZWNoLWhvdXNlXG5cbiAgdmFyIGNhbG1fbWl4ZXMgPSB7XG4gICAgbWl4ZXM6IFtcbiAgICAgIC8vbmV3IG1peCBnb2VzIGhlcmVcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IFwiVGhlIEVpZ2VyXCIsXG4gICAgICAgIGdlbnJlczogXCJUZWNoIEhvdXNlXCIsXG4gICAgICAgIGRhdGU6IFwiU2VwdCAyMDE2XCIsXG4gICAgICAgIHNsdWc6IFwidmEtdGVjaC1ob3VzZVwiLFxuICAgICAgICByYXRpbmc6IDNcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBcIkdhcmliYWxkaVwiLFxuICAgICAgICBnZW5yZXM6IFwiRGVlcCBIb3VzZVwiLFxuICAgICAgICBkYXRlOiBcIkp1bmUgMjAxNlwiLFxuICAgICAgICBzbHVnOiBcInZhLWRlZXAtaG91c2UtdjJcIixcbiAgICAgICAgcmF0aW5nOiAyXG4gICAgICB9LFxuICAgIF1cbiAgfTtcblxuICB2YXIgaW50ZW5zZV9taXhlcyA9IHtcbiAgICBtaXhlczogW1xuICAgICAgLy9uZXcgbWl4IGdvZXMgaGVyZVxuICAgICAge1xuICAgICAgICB0aXRsZTogXCJCbHVlcHJpbnQgMTl0aCBXYXJtdXBcIixcbiAgICAgICAgZ2VucmVzOiBcIlJlenogR3JpeiBHcmltZSBXLlMuTiBERnJhbmNpc1wiLFxuICAgICAgICBkYXRlOiBcIk9jdG9iZXIgMjAxNlwiLFxuICAgICAgICBzbHVnOiBcImJsdWVwcmludC0xOS13YXJtdXBcIixcbiAgICAgICAgcmF0aW5nOiA5XG4gICAgICB9LHtcbiAgICAgICAgdGl0bGU6IFwiTGl2ZSBAIEJpcnRoUmF2ZSAyMDE2XCIsXG4gICAgICAgIGdlbnJlczogXCJCYXNzIEZ1bmssIFRyYXAsIER1YlwiLFxuICAgICAgICBkYXRlOiBcIlNlcHQgMjQsIDIwMTZcIixcbiAgICAgICAgc2x1ZzogXCJsaXZlLWJpcnRocmF2ZS0yMDE2LWJhc3MtZnVuay1kdWJcIixcbiAgICAgICAgcmF0aW5nOiA4XG4gICAgICB9LHsgXG4gICAgICAgIHRpdGxlOiBcIkJsYWNrIFR1c2tcIixcbiAgICAgICAgZ2VucmVzOiBcIlRyYXAgJiBEdWJzdGVwXCIsXG4gICAgICAgIGRhdGU6IFwiQXVndXN0IDIwMTZcIixcbiAgICAgICAgc2x1ZzogXCJ2YS1kdWJ0cmFwXCIsXG4gICAgICAgIHJhdGluZzogOVxuICAgICAgfSx7XG4gICAgICAgIHRpdGxlOiBcIlNldmVuIExpb25zIHdhcm11cFwiLFxuICAgICAgICBnZW5yZXM6IFwiRHJlYW1zdGVwXCIsXG4gICAgICAgIGRhdGU6IFwiT2N0b2JlciAyMDE2XCIsXG4gICAgICAgIHNsdWc6IFwic2V2ZW4tbGlvbnMtd2FybS11cC1taXhcIixcbiAgICAgICAgcmF0aW5nOiA3XG4gICAgICB9XG4gICAgXVxuICB9Oy8vIGludGVuc2UgbWl4ZXNcblxuICAvLyAvL2luamVjdCBoYW5kbGViYXJzIHRlbXBsYXRlcyB3aXRoIG1peCBkYXRhXG4gIGluamVjdFRlbXBsYXRlcyhpbnRlbnNlX21peGVzLCAgJ2ludGVuc2UnKTsgXG4gIGluamVjdFRlbXBsYXRlcyhjYWxtX21peGVzLCAgICAgJ2NhbG0nKTtcbiAgXG4gIGZ1bmN0aW9uIGluamVjdFRlbXBsYXRlcyhkYXRhLCB0eXBlKXtcblxuICAgIHZhciBodG1sID0gTXlBcHAudGVtcGxhdGVzLm1peGVzKGRhdGEpO1xuICAgICQoJyNtaXhlcy10bXBsLScrdHlwZSkuaHRtbChodG1sKTtcbiAgfSAgXG5cblxufSk7XG4gIFxuXG4gIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
